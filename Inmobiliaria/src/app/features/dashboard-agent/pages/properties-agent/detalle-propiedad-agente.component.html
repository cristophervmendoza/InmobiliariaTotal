<div class="property-detail-container" *ngIf="property; else loadingTpl">
  <div class="content">
    <!-- COLUMNA PRINCIPAL -->
    <div class="main">
      <!-- ENCABEZADO -->
      <div class="header">
        <div class="typeBadge">{{ property.type }}</div>
        <h1 class="title">{{ property.title }}</h1>
        <p class="location">ğŸ“ {{ property.location }}</p>
        <div class="price">$ {{ property.price | number: '1.0-0' }}</div>
      </div>

      <!-- CARACTERÃSTICAS PRINCIPALES -->
      <div class="section">
        <h2>CaracterÃ­sticas Principales</h2>
        <div class="main-features">
          <div class="feature-card">
            ğŸ›ï¸ <div><strong>{{ property.bedrooms }}</strong><span>Habitaciones</span></div>
          </div>
          <div class="feature-card">
            ğŸ› <div><strong>{{ property.bathrooms }}</strong><span>BaÃ±os</span></div>
          </div>
          <div class="feature-card">
            ğŸ“ <div><strong>{{ property.area }} mÂ²</strong><span>Ãrea</span></div>
          </div>
          <div class="feature-card">
            ğŸš— <div><strong>{{ property.parking }}</strong><span>Estacionamientos</span></div>
          </div>
        </div>
      </div>

      <!-- DESCRIPCIÃ“N -->
      <div class="section">
        <h2>DescripciÃ³n</h2>
        <p>{{ property.description }}</p>
      </div>

      <!-- CARACTERÃSTICAS ADICIONALES -->
      <div class="section" *ngIf="property && property.features && property.features.length > 0">
        <h2>CaracterÃ­sticas Adicionales</h2>
        <ul class="list">
          <li *ngFor="let feature of property.features">âœ” {{ feature }}</li>
        </ul>
      </div>

      <!-- AMENIDADES -->
      <div class="section" *ngIf="property && property.amenities && property.amenities.length > 0">
        <h2>Amenidades</h2>
        <ul class="list">
          <li *ngFor="let amenity of property.amenities">âœ” {{ amenity }}</li>
        </ul>
      </div>
    </div>


    <!-- SIDEBAR -->
    <div class="sidebar">
      <!-- AGENTE ASIGNADO - Solo se muestra si viene del catÃ¡logo -->
      <div class="agent" *ngIf="showAgentInfo && property.agent">
        <h3>AGENTE ASIGNADO</h3>
        <div class="agent-name">{{ property.agent.name }}</div>
        <div class="agent-detail">ğŸ“ {{ property.agent.phone }}</div>
        <div class="agent-detail">ğŸ“§ {{ property.agent.email }}</div>
        <button class="contactBtn" (click)="contactAgent()">
          Contactar Agente
        </button>
      </div>

      <!-- CALCULADORA -->
      <div class="calculator">
        <h3>Calculadora de Cuotas</h3>

        <label>Inicial ($)</label>
        <input type="number" placeholder="Ej: 90000"
               [(ngModel)]="downPayment"
               (input)="calculateMortgage()" />

        <label>Tasa de InterÃ©s Anual (%)</label>
        <input type="number" [(ngModel)]="interestRate"
               (input)="calculateMortgage()" />

        <label>Plazo (aÃ±os)</label>
        <input type="number" [(ngModel)]="loanTerm"
               (input)="calculateMortgage()" />

        <div class="calcResult" *ngIf="monthlyPayment > 0">
          <div class="label">Cuota Mensual Estimada</div>
          <div class="value">$ {{ monthlyPayment | number: '1.2-2' }}</div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #loadingTpl>
  <div class="loading">Cargando detalles de la propiedad...</div>
</ng-template>
